{"version":3,"sources":["block-slider.min.js","block-slider.js"],"names":["BlockSlider","collection","_ref","cache","slider","wrap","querySelector","wrapClass","items","slice","call","itemsClass","children","duration","calcTransiton","setAttribute","sliders","push","slidePosition","itemsPerSlide","itemWidth","wrapWidth","sliderWidth","slide","forEach","s","str","style","webkitTransform","msTransform","transform","hasReachedEnd","calcAndSetWidths","removeInlineWidths","opacity","removeProperty","item","i","arr","setWidths","width","length","offsetWidth","calcItemWidth","calcItemsPerSlide","Math","round","setTimeout","safariFixDelay","_ref$sInterval","sInterval","undefined","_ref$sTransition","sTransition","_ref$wrapClass","_ref$itemsClass","test","window","HTMLElement","resizeTimer","addEventListener","clearTimeout","setInterval","jQuery","$","fn","opts","this"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA,YAAA,SAASA,aAAYC,EAAYC,GAkB7B,QAASC,GAAMC,GACX,GAAMC,GAAOD,EAAOE,cAAcC,GAC9BC,KAAWC,MAAMC,KAAKL,EAAKC,cAAcK,GAAYC,SAAU,GAC/DC,EAAWC,GACfV,GAAOW,aAAa,QAAS,gCAC7BV,EAAKU,aAAa,QAAO,yCAA2CF,EAAQ,2BAA2BA,EAAQ,MAC/GG,EAAQC,MACJb,OAAAA,EACAC,KAAAA,EACAG,MAAAA,EACAU,cAAe,EACfC,cAAe,EACfC,UAAW,EACXC,UAAW,EACXC,YAAa,IAWrB,QAASC,KACLP,EAAQQ,QAAQ,SAAAC,GACZ,GAAMpB,GAAOoB,EAAEpB,KACXqB,EAAG,eAAkBD,EAAEP,cAAa,WACxCb,GAAKsB,MAAMC,gBAAkBF,EAC7BrB,EAAKsB,MAAME,YAAcH,EACzBrB,EAAKsB,MAAMG,UAAYJ,EACvBD,EAAEP,eAAiBO,EAAEL,UACjBW,EAAcN,KACdA,EAAEP,cAAgB,KAK9B,QAASc,KACL,QAASC,GAAmBR,GAExBA,EAAErB,OAAOuB,MAAMO,QAAU,EAEzBT,EAAEpB,KAAKsB,MAAMQ,eAAe,SAC5BV,EAAEjB,MAAMgB,QAAQ,SAACY,EAAMC,EAAGC,GACtBF,EAAKT,MAAMQ,eAAe,WAQlC,QAASI,GAAUd,GAGfA,EAAEjB,MAAMgB,QAAQ,SAACY,GACbA,EAAKT,MAAMa,MAAQf,EAAEL,UAAY,OAGrCK,EAAEJ,UAAYI,EAAEL,UAAYK,EAAEjB,MAAMiC,OACpChB,EAAEpB,KAAKsB,MAAMa,MAAQf,EAAEJ,UAAY,KACnCI,EAAEH,YAAcG,EAAErB,OAAOsC,YAb7B,GAAMC,GAAgB,SAAAlB,GAUlB,MAVuBA,GAAEjB,MAAM,GAAGkC,aAEhCE,EAAoB,SAAAnB,GAYtB,MAZ2BoB,MAAKC,MAAMrB,EAAEH,YAAcG,EAAEL,WAc5DJ,GAAQQ,QAAQ,SAAAC,GACZQ,EAAmBR,GAEnBsB,WAAW,WAEPtB,EAAEL,UAAYuB,EAAclB,GAC5Bc,EAAUd,GACVA,EAAEN,cAAgByB,EAAkBnB,GACpCA,EAAEP,cAAgB,EAClB6B,WAAW,WAEPtB,EAAErB,OAAOuB,MAAMO,QAAU,EACzBX,KACDyB,IACJA,KA9FX,GAAIC,GAJyB/C,EAC7BgD,UAAAA,EAASC,SAAAF,EAAG,IAAIA,EAKZG,EANyBlD,EAE7BmD,YAAAA,EAAWF,SAAAC,EAAG,IAAGA,EAMbE,EARyBpD,EAG7BK,UAAAA,EAAS4C,SAAAG,EAAG,yBAAwBA,EAOhCC,EAVyBrD,EAI7BS,WAAAA,EAAUwC,SAAAI,EAAG,0BAAyBA,EAGhCP,EAAiB,eAAeQ,KAAKC,OAAOC,aAAe,IAAM,EACnE1C,KACA2C,EAAWR,MAGf,IAAKlD,IAAeA,EAAWwC,QAAWxC,EAAWK,eAArD,CAIA,GAAMQ,GAAgB,WAMlB,MANwBuC,GAAc,IAmBtCpD,GAAWwC,UACRjB,QAAQd,KAAKT,EAAYE,GAE5BA,EAAMF,EAGV,IAAM8B,GAAgB,SAAAN,GAQlB,QARyBA,EAAEP,cAAgB,GAAKO,EAAEJ,UAAYI,EAAEH,YA6DpEU,KAEAyB,OAAOG,iBAAiB,SAAU,WAE9BC,aAAaF,GACbA,EAAcZ,WAAWf,EAAkB,OAG/C8B,YAAY,WACRvC,EAAMP,IACPkC,IAIHO,OAAOM,SACP,SAAEC,GACEA,EAAEC,GAAGjE,YAAc,SAASkE,GAExB,MADAlE,aAAYmE,KAAMD,GACXC,OAEZV,OAAOM","file":"block-slider.min.js","sourcesContent":[null,"function BlockSlider(collection, {\n    sInterval = 2000,\n    sTransition = 400,\n    wrapClass = '.js-block-slider__wrap',\n    itemsClass = '.js-block-slider__items'\n}) {\n    'use strict';\n    const safariFixDelay = /constructor/i.test(window.HTMLElement) ? 500 : 0,\n        sliders = [];\n    let resizeTimer;\n\n    // if collection not found, return.\n    if (!collection || !collection.length && !collection.querySelector) {\n        return;\n    }\n\n    const calcTransiton = () => sTransition / 1000;\n\n    function cache(slider) {\n        const wrap = slider.querySelector(wrapClass),\n            items = [].slice.call(wrap.querySelector(itemsClass).children, 0),\n            duration = calcTransiton();\n        slider.setAttribute('style', 'overflow: hidden; opacity: 0');\n        wrap.setAttribute('style', `-webkit-transition: -webkit-transform ${duration}s;transition: transform ${duration}s;`);\n        sliders.push({\n            slider,\n            wrap,\n            items,\n            slidePosition: 0,\n            itemsPerSlide: 0,\n            itemWidth: 0,\n            wrapWidth: 0,\n            sliderWidth: 0\n        });\n    }\n    if (collection.length) {\n        [].forEach.call(collection, cache);\n    } else {\n        cache(collection);\n    }\n\n    const hasReachedEnd = s => -(s.slidePosition + 1) > s.wrapWidth - s.sliderWidth;\n\n    function slide() {\n        sliders.forEach(s => {\n            const wrap = s.wrap,\n                str = `translate3d(${s.slidePosition}px, 0, 0)`;\n            wrap.style.webkitTransform = str;\n            wrap.style.msTransform = str;\n            wrap.style.transform = str;\n            s.slidePosition -= s.itemWidth;\n            if (hasReachedEnd(s)) {\n                s.slidePosition = 0;\n            }\n        });\n    }\n\n    function calcAndSetWidths() {\n        function removeInlineWidths(s) {\n            // Temporarily hide the slider\n            s.slider.style.opacity = 0;\n            // Remove widths for wrap and all items.\n            s.wrap.style.removeProperty('width');\n            s.items.forEach((item, i, arr) => {\n                item.style.removeProperty('width');\n            });\n        }\n\n        const calcItemWidth = s => s.items[0].offsetWidth;\n\n        const calcItemsPerSlide = s => Math.round(s.sliderWidth / s.itemWidth);\n\n        function setWidths(s) {\n            // loop through all items and set their width in pixels\n            // to the calculated width.\n            s.items.forEach((item) => {\n                item.style.width = s.itemWidth + 'px';\n            });\n            // Set wrap width equal to total width of items.\n            s.wrapWidth = s.itemWidth * s.items.length;\n            s.wrap.style.width = s.wrapWidth + 'px';\n            s.sliderWidth = s.slider.offsetWidth;\n        }\n\n        sliders.forEach(s => {\n            removeInlineWidths(s);\n            // create a slight delay for Safari being rubbishly slow at layout calcs.\n            setTimeout(() => {\n                // get the default CSS item width in pixels.\n                s.itemWidth = calcItemWidth(s);\n                setWidths(s);\n                s.itemsPerSlide = calcItemsPerSlide(s);\n                s.slidePosition = 0;\n                setTimeout(() => {\n                    // fade slider back in.\n                    s.slider.style.opacity = 1;\n                    slide();\n                }, safariFixDelay);\n            }, safariFixDelay);\n        });\n    }\n\n    calcAndSetWidths();\n\n    window.addEventListener('resize', () => {\n        // call setWidths once the screen has finished resizing.\n        clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(calcAndSetWidths, 250);\n    });\n\n    setInterval(() => {\n        slide(sliders);\n    }, sInterval);\n}\n\n// if jQuery is present, create a plugin.\nif (window.jQuery) {\n    (($) => {\n        $.fn.BlockSlider = function(opts) {\n            BlockSlider(this, opts);\n            return this;\n        };\n    })(window.jQuery);\n}\n"],"sourceRoot":"/source/"}